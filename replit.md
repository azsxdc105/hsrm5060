# نظام إدارة مطالبات التأمين السعودي

## نظرة عامة
نظام ويب شامل لإدارة المطالبات المالية لشركات التأمين في المملكة العربية السعودية. يوفر النظام إدارة متكاملة للمطالبات مع إرسال تلقائي للبريد الإلكتروني، إدارة المرفقات، وواجهة عربية سهلة الاستخدام.

## الحالة الحالية
- ✅ تم إنشاء قاعدة البيانات وإعداد الجداول
- ✅ تم إضافة 18 شركة تأمين سعودية
- ✅ تم إنشاء حساب الأدمن (admin@claims.com / admin123)
- ✅ تم إعداد نظام المصادقة والأدوار
- ✅ تم إنشاء نظام إدارة المطالبات
- ✅ تم إعداد نظام إرسال البريد الإلكتروني
- ✅ تم إنشاء لوحة التحكم الإدارية

## المميزات الرئيسية

### 1. إدارة المطالبات
- إنشاء مطالبات جديدة مع جميع البيانات المطلوبة
- رفع ملفات متعددة (PDF, JPG, PNG, DOCX)
- تتبع حالة المطالبات (مسودة، جاهز، مرسل، فشل، مستلم، مدفوع)
- تحديث وتعديل المطالبات
- تصدير المرفقات كملف ZIP

### 2. إرسال البريد الإلكتروني
- إرسال تلقائي للمطالبات إلى شركات التأمين
- قوالب بريد إلكتروني قابلة للتخصيص لكل شركة
- سجل كامل لجميع عمليات الإرسال
- دعم المرفقات التلقائية

### 3. إدارة شركات التأمين
- قاعدة بيانات شاملة لشركات التأمين السعودية
- إعداد بريد إلكتروني منفصل لكل شركة
- قوالب بريد مخصصة لكل شركة
- إدارة البيانات الإضافية (روابط، ملاحظات)

### 4. نظام المستخدمين والأدوار
- نظام مصادقة آمن
- ثلاثة أدوار: مدير، موظف مطالبات، مشاهد
- إدارة شاملة للمستخدمين

### 5. لوحة التحكم والتقارير
- إحصائيات شاملة للمطالبات
- تقارير مفصلة حسب الشركة والحالة
- متابعة نسب النجاح
- سجل كامل للبريد الإلكتروني

## التقنيات المستخدمة
- **Backend**: Flask + SQLAlchemy + PostgreSQL
- **Frontend**: Bootstrap 5 RTL + Arabic UI
- **Security**: Flask-Login, CSRF Protection, Bcrypt
- **Email**: Flask-Mail with SMTP
- **File Upload**: Werkzeug with security validation
- **Database**: PostgreSQL (production ready)

## هيكل المشروع
```
├── app/
│   ├── __init__.py           # تهيئة التطبيق
│   ├── models.py             # نماذج قاعدة البيانات
│   ├── forms.py              # نماذج الويب
│   ├── email_utils.py        # وظائف البريد الإلكتروني
│   ├── routes/              # المسارات
│   │   ├── auth.py          # المصادقة
│   │   ├── main.py          # الصفحات الرئيسية
│   │   ├── claims.py        # إدارة المطالبات
│   │   └── admin.py         # لوحة الإدارة
│   └── templates/           # قوالب HTML
├── config.py                # إعدادات التطبيق
├── run.py                   # تشغيل التطبيق
├── seed_data.py             # بيانات البداية
└── requirements.txt         # المكتبات المطلوبة
```

## الأدوار والصلاحيات
- **مدير (Admin)**: صلاحيات كاملة لإدارة النظام
- **موظف مطالبات (Claims Agent)**: إنشاء وإدارة المطالبات
- **مشاهد (Viewer)**: عرض المطالبات فقط

## بيانات الدخول الافتراضية
- البريد الإلكتروني: admin@claims.com
- كلمة المرور: admin123

## التغييرات الأخيرة
- 2025-01-17: إنشاء النظام الكامل مع جميع المميزات
- 2025-01-17: إضافة قاعدة بيانات شركات التأمين السعودية
- 2025-01-17: تنفيذ نظام إرسال البريد الإلكتروني
- 2025-01-17: إنشاء واجهة إدارية شاملة
- 2025-01-17: إصلاح مشاكل Flask-Babel وقاعدة البيانات

## المهام القادمة
- إضافة ميزات الذكاء الاصطناعي (OCR) 
- تحسين التقارير والإحصائيات
- إضافة API للتكامل مع الأنظمة الخارجية
- تطوير تطبيق جوال مصاحب

## ملاحظات للمطوير
- النظام يدعم اللغة العربية بشكل أساسي مع إمكانية التبديل للإنجليزية
- تم تصميم النظام ليكون قابلاً للتوسع والتطوير
- جميع العمليات الحساسة محمية بنظام CSRF
- رفع الملفات محدود بأنواع آمنة وأحجام محددة
- النظام جاهز للنشر في بيئة الإنتاج

## تعليمات التشغيل
1. تثبيت المكتبات: تم بالفعل
2. إعداد قاعدة البيانات: تم بالفعل
3. تشغيل seed_data.py: تم بالفعل
4. تشغيل التطبيق: python run.py

## User Preferences
- اللغة: العربية (أساسي)
- التصميم: Bootstrap RTL
- قاعدة البيانات: PostgreSQL
- الأمان: مستوى عالي مع CSRF وتشفير